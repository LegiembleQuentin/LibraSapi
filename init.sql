--
-- PostgreSQL database dump
--

-- Dumped from database version 16.3 (Debian 16.3-1.pgdg120+1)
-- Dumped by pg_dump version 16.3 (Debian 16.3-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: app_user; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.app_user (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    displayname character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    fname character varying(255),
    img_url character varying(255),
    modified_at timestamp(6) without time zone,
    name character varying(255),
    password character varying(255) NOT NULL,
    roles character varying(255) NOT NULL
);


ALTER TABLE public.app_user OWNER TO librasdb;

--
-- Name: app_user_id_seq; Type: SEQUENCE; Schema: public; Owner: librasdb
--

ALTER TABLE public.app_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.app_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: author; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.author (
    id bigint NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.author OWNER TO librasdb;

--
-- Name: author_id_seq; Type: SEQUENCE; Schema: public; Owner: librasdb
--

ALTER TABLE public.author ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.author_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: book; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.book (
    id bigint NOT NULL,
    created_at date NOT NULL,
    date_end date,
    date_start date NOT NULL,
    external_id character varying(255),
    is_completed boolean NOT NULL,
    modified_at date,
    names character varying(255) NOT NULL,
    nb_visit integer NOT NULL,
    nb_volume integer NOT NULL,
    note numeric(38,2),
    synopsis text,
    img_url character varying(255),
    french_search_name character varying(255)
);


ALTER TABLE public.book OWNER TO librasdb;

--
-- Name: book_author; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.book_author (
    book_id bigint NOT NULL,
    author_id bigint NOT NULL
);


ALTER TABLE public.book_author OWNER TO librasdb;

--
-- Name: book_id_seq; Type: SEQUENCE; Schema: public; Owner: librasdb
--

ALTER TABLE public.book ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.book_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: book_tag; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.book_tag (
    book_id bigint NOT NULL,
    tag_id bigint NOT NULL
);


ALTER TABLE public.book_tag OWNER TO librasdb;

--
-- Name: comment; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.comment (
    id bigint NOT NULL,
    content text NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    modified_at timestamp(6) without time zone NOT NULL,
    note numeric(38,2),
    app_user_id bigint NOT NULL
);


ALTER TABLE public.comment OWNER TO librasdb;

--
-- Name: comment_id_seq; Type: SEQUENCE; Schema: public; Owner: librasdb
--

ALTER TABLE public.comment ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.comment_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: comment_likes; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.comment_likes (
    comment_id bigint NOT NULL,
    user_id bigint NOT NULL
);


ALTER TABLE public.comment_likes OWNER TO librasdb;

--
-- Name: related_books; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.related_books (
    book_id bigint NOT NULL,
    related_book_id bigint NOT NULL
);


ALTER TABLE public.related_books OWNER TO librasdb;

--
-- Name: tag; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.tag (
    id bigint NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.tag OWNER TO librasdb;

--
-- Name: tag_id_seq; Type: SEQUENCE; Schema: public; Owner: librasdb
--

ALTER TABLE public.tag ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.tag_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_book_info; Type: TABLE; Schema: public; Owner: librasdb
--

CREATE TABLE public.user_book_info (
    id bigint NOT NULL,
    current_volume integer,
    note integer NOT NULL,
    status smallint,
    app_user_id bigint NOT NULL,
    book_id bigint NOT NULL,
    CONSTRAINT user_book_info_status_check CHECK (((status >= 0) AND (status <= 2)))
);


ALTER TABLE public.user_book_info OWNER TO librasdb;

--
-- Name: user_book_info_id_seq; Type: SEQUENCE; Schema: public; Owner: librasdb
--

ALTER TABLE public.user_book_info ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.user_book_info_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: app_user; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.app_user (id, created_at, displayname, email, fname, img_url, modified_at, name, password, roles) FROM stdin;
5	2024-07-08 12:41:16.327857	quentingoat	quentin@gmail.com	\N	\N	\N	\N	$2a$10$CVPsrLcCDKLpNFGxfNJ56eIhBRKCtQAWm69B0Q0Ii9t8HW6HPvZPq	USER
\.


--
-- Data for Name: author; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.author (id, name) FROM stdin;
1	Yasuhiro Nightow
2	Xia Da
3	Masashi Kishimoto
4	Tite Kubo
5	Nobuhiro Watsuki
6	Yoshihiro Togashi
7	Akira Toriyama
8	Eiichiro Oda
9	Hirohiko Araki
10	Katsura Hoshino
11	Hiromu Arakawa
12	Norihiro Yagi
13	Nobuhiro Watsuki
14	Yukito Kishiro
15	Takeshi Obata
16	Tsugumi Ohba
17	Naoki Urasawa
18	Rumiko Takahashi
19	Yukiru Sugisaki
20	CLAMP
21	Matsuri Hino
22	Ai Yazawa
23	Kaori Yuki
24	Makoto Yukimura
25	Kentar├┤ Miura
26	K├┤hei Horikoshi
27	Yoshiyuki Sadamoto
28	Shin'ichi Sakamoto
29	Jiro Nitta
30	Takehiko Inoue
31	Tsutomu Nihei
32	Q Hayashida
33	Dave Gibbons
34	Alan Moore
\.


--
-- Data for Name: book; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.book (id, created_at, date_end, date_start, external_id, is_completed, modified_at, names, nb_visit, nb_volume, note, synopsis, img_url, french_search_name) FROM stdin;
6	2024-07-08	\N	1998-03-24	\N	f	\N	Vagabond	29	37	9.30	Vagabond est un classique des r├®cits de samoura├»s qui suit la vie et les luttes du l├®gendaire ├®p├®iste Musashi Miyamoto.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fvagabond_t1.jpg?alt=media&token=d0271e01-6daf-4268-8284-fbbeecb0c9b8	vagabond
3	2024-07-08	\N	2005-04-13	\N	f	\N	Vinland Saga	5	26	9.50	Vinland Saga is a historical manga series written and illustrated by Makoto Yukimura.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fvinlandsaga_t11.jpg?alt=media&token=2bfdb622-c519-43a0-b25a-81d99dc1896c	vinland saga
2	2024-07-08	2012-08-10	2008-10-23	\N	t	\N	Ascension, The Climber	12	17	8.50	Buntaro Mori, jeune lyc├®en solitaire et renferm├®, est d├®fi├® par un camarade de classe fan d'escalade. Le d├®fi ? Escalader le lyc├®e ! C'est alors que, en grimpant le long d'une tuile bien plac├®e, Buntaro se d├®couvre une passion et un don. Apr├¿s avoir escalad├® sans trop de mal le lyc├®e, ce dernier est tout de suite rep├®r├® par son prof d'anglais, lui m├¬me fan de grimpe extr├¬me. Gr├óce ├á l'escalade, Buntaro va se d├®couvrir un but dans la vie, et se perfectionner dans ce domaine, jusqu'├á atteindre les cieux...	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fascension_t1.jpg?alt=media&token=553de6cc-28d3-4113-9cc6-31536dfe8f9c	ascension
11	2024-07-08	1987-10-01	1986-09-01	\N	t	\N	Watchmen	12	12	9.50	Watchmen est un roman graphique qui d├®construit le genre des super-h├®ros avec une narration complexe et des th├¿mes matures.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fwatchmen_t1.jpg?alt=media&token=e6cb758d-6949-4e1e-bda0-b9564013388b	watchmen
10	2024-07-08	2003-09-24	1997-03-25	\N	t	\N	Blame	23	10	10.00	Blame est un manga cyberpunk dystopique se d├®roulant dans une m├®gastructure vaste et labyrinthique.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fblame_t1.jpg?alt=media&token=88369d47-c5b5-447b-8934-42d66a880290	blame
4	2024-07-08	\N	2020-01-01	\N	f	\N	Bu Tian Ge, Song of the Sky Pacers	11	10	8.00	Bu Tian Ge est une s├®rie fantastique captivante qui explore les aventures l├®gendaires des Sky Pacers et leurs aventures mystiques.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fbutiange_t2.jpg?alt=media&token=d9549496-45e8-4e1e-a771-fe79fb2c9c63	bu tian ge
8	2024-07-08	\N	2019-04-12	\N	f	\N	Dai Dark	15	5	8.70	Dai Dark est une s├®rie de science-fiction sombre par Q Hayashida, connue pour ses personnages excentriques et son cadre lugubre.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fdaidark_t1.jpg?alt=media&token=718b8420-175b-45fe-9957-e4674c0e19b7	dai dark
9	2024-07-08	2018-09-12	2000-11-30	\N	t	\N	Dorohedoro	11	23	8.80	Dorohedoro est un manga urbain fantastique et granuleux se d├®roulant dans un monde o├╣ magie et violence se rencontrent.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fdorohedoro_t6.jpg?alt=media&token=b5acd40c-eff9-4e28-ad46-8091eee25ab1	dorohedoro
7	2024-07-08	1996-06-17	1990-10-01	\N	t	\N	Slam Dunk	13	31	9.00	Slam Dunk est un manga sportif sur une ├®quipe de basket-ball au lyc├®e et son parcours vers le sommet.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Fslam_dunk_t19.jpg?alt=media&token=cb6fb9b3-a39b-4486-bb26-0ab2cdc3935b	slam dunk
5	2024-07-08	\N	2001-05-15	\N	f	\N	The Ravages Of Times	5	52	9.20	The Ravages Of Times est un drame historique fascinant situ├® dans la Chine antique, mettant en sc├¿ne les luttes de pouvoir et les batailles strat├®giques.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Ftheravagesoftime.jpg?alt=media&token=5b903337-a1b3-4d9d-a428-89a15fdfc637	the ravage of times
1	2024-07-08	1997-01-01	1996-04-26	\N	t	\N	Trigun	30	3	9.00	Sur la plan├¿te "br├╗l├®e par les rayons deux soleils", Vash the Stampede a.k.a le typhon humano├»de est une t├¬te recherch├®e et mise ├á prix pour la modique somme de $$60,000,000,000 (entendez $$ par double dollars). Dans ce monde sans foi ni loi, les habitants vivent d'une mani├¿re rustique, contrastant largement avec les restes de leur h├®ritage d'une technologie avanc├®e.	https://firebasestorage.googleapis.com/v0/b/libras-ab46c.appspot.com/o/covers%2Ftrigun_t1.jpg?alt=media&token=21f5485d-4fb2-4b72-9270-d4b2c4c0a6e4	trigun
\.


--
-- Data for Name: book_author; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.book_author (book_id, author_id) FROM stdin;
1	1
2	28
2	29
3	24
4	2
6	30
7	30
8	32
9	32
10	31
5	1
\.


--
-- Data for Name: book_tag; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.book_tag (book_id, tag_id) FROM stdin;
3	2
3	11
3	3
4	2
4	4
6	2
6	11
11	1
11	12
11	13
10	2
10	5
10	12
8	2
8	7
8	5
8	3
8	12
2	2
2	10
9	2
9	4
9	7
9	12
7	2
7	9
7	10
5	2
5	11
1	2
1	3
1	5
1	13
1	12
\.


--
-- Data for Name: comment; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.comment (id, content, created_at, modified_at, note, app_user_id) FROM stdin;
\.


--
-- Data for Name: comment_likes; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.comment_likes (comment_id, user_id) FROM stdin;
\.


--
-- Data for Name: related_books; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.related_books (book_id, related_book_id) FROM stdin;
\.


--
-- Data for Name: tag; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.tag (id, name) FROM stdin;
1	Comics
2	Manga
3	Aventure
4	Fantasy
5	Science fiction
6	Thriller
7	Horreur
8	Romance
9	Tranche de vie
10	Sport
11	Historique
12	Surnaturel
13	Myst├¿re
\.


--
-- Data for Name: user_book_info; Type: TABLE DATA; Schema: public; Owner: librasdb
--

COPY public.user_book_info (id, current_volume, note, status, app_user_id, book_id) FROM stdin;
21	0	0	0	5	8
20	3	1	1	5	1
18	12	6	2	5	5
19	6	2	2	5	2
17	7	7	2	5	10
\.


--
-- Name: app_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: librasdb
--

SELECT pg_catalog.setval('public.app_user_id_seq', 5, true);


--
-- Name: author_id_seq; Type: SEQUENCE SET; Schema: public; Owner: librasdb
--

SELECT pg_catalog.setval('public.author_id_seq', 34, true);


--
-- Name: book_id_seq; Type: SEQUENCE SET; Schema: public; Owner: librasdb
--

SELECT pg_catalog.setval('public.book_id_seq', 11, true);


--
-- Name: comment_id_seq; Type: SEQUENCE SET; Schema: public; Owner: librasdb
--

SELECT pg_catalog.setval('public.comment_id_seq', 1, false);


--
-- Name: tag_id_seq; Type: SEQUENCE SET; Schema: public; Owner: librasdb
--

SELECT pg_catalog.setval('public.tag_id_seq', 13, true);


--
-- Name: user_book_info_id_seq; Type: SEQUENCE SET; Schema: public; Owner: librasdb
--

SELECT pg_catalog.setval('public.user_book_info_id_seq', 21, true);


--
-- Name: app_user app_user_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.app_user
    ADD CONSTRAINT app_user_pkey PRIMARY KEY (id);


--
-- Name: author author_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.author
    ADD CONSTRAINT author_pkey PRIMARY KEY (id);


--
-- Name: book_author book_author_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book_author
    ADD CONSTRAINT book_author_pkey PRIMARY KEY (book_id, author_id);


--
-- Name: book book_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book
    ADD CONSTRAINT book_pkey PRIMARY KEY (id);


--
-- Name: book_tag book_tag_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book_tag
    ADD CONSTRAINT book_tag_pkey PRIMARY KEY (book_id, tag_id);


--
-- Name: comment_likes comment_likes_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.comment_likes
    ADD CONSTRAINT comment_likes_pkey PRIMARY KEY (comment_id, user_id);


--
-- Name: comment comment_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.comment
    ADD CONSTRAINT comment_pkey PRIMARY KEY (id);


--
-- Name: related_books related_books_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.related_books
    ADD CONSTRAINT related_books_pkey PRIMARY KEY (book_id, related_book_id);


--
-- Name: tag tag_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.tag
    ADD CONSTRAINT tag_pkey PRIMARY KEY (id);


--
-- Name: user_book_info user_book_info_pkey; Type: CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.user_book_info
    ADD CONSTRAINT user_book_info_pkey PRIMARY KEY (id);


--
-- Name: related_books fk25khsp5os652g52ucvy24d6yb; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.related_books
    ADD CONSTRAINT fk25khsp5os652g52ucvy24d6yb FOREIGN KEY (book_id) REFERENCES public.book(id);


--
-- Name: comment fk7as5fn8ojg458j11y2an51bjb; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.comment
    ADD CONSTRAINT fk7as5fn8ojg458j11y2an51bjb FOREIGN KEY (app_user_id) REFERENCES public.app_user(id);


--
-- Name: book_author fkbjqhp85wjv8vpr0beygh6jsgo; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book_author
    ADD CONSTRAINT fkbjqhp85wjv8vpr0beygh6jsgo FOREIGN KEY (author_id) REFERENCES public.author(id);


--
-- Name: comment_likes fkd0epu3dcjc57pwe7lt5jgfqsi; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.comment_likes
    ADD CONSTRAINT fkd0epu3dcjc57pwe7lt5jgfqsi FOREIGN KEY (comment_id) REFERENCES public.comment(id);


--
-- Name: comment_likes fkd7xm1uq54enguaxq5x3lf6da; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.comment_likes
    ADD CONSTRAINT fkd7xm1uq54enguaxq5x3lf6da FOREIGN KEY (user_id) REFERENCES public.app_user(id);


--
-- Name: user_book_info fkddad8h68sdgxuul1x6yncqyve; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.user_book_info
    ADD CONSTRAINT fkddad8h68sdgxuul1x6yncqyve FOREIGN KEY (app_user_id) REFERENCES public.app_user(id);


--
-- Name: book_tag fkdrc33u5ufw8rdvajeveowgx7g; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book_tag
    ADD CONSTRAINT fkdrc33u5ufw8rdvajeveowgx7g FOREIGN KEY (book_id) REFERENCES public.book(id);


--
-- Name: user_book_info fkhc3vbr55y5c37ftxr6bdtogjf; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.user_book_info
    ADD CONSTRAINT fkhc3vbr55y5c37ftxr6bdtogjf FOREIGN KEY (book_id) REFERENCES public.book(id);


--
-- Name: related_books fkhgivkgdllukqrww8hub2tovi4; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.related_books
    ADD CONSTRAINT fkhgivkgdllukqrww8hub2tovi4 FOREIGN KEY (related_book_id) REFERENCES public.book(id);


--
-- Name: book_author fkhwgu59n9o80xv75plf9ggj7xn; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book_author
    ADD CONSTRAINT fkhwgu59n9o80xv75plf9ggj7xn FOREIGN KEY (book_id) REFERENCES public.book(id);


--
-- Name: book_tag fkrxw4xl05l6ns1763bq284e7m2; Type: FK CONSTRAINT; Schema: public; Owner: librasdb
--

ALTER TABLE ONLY public.book_tag
    ADD CONSTRAINT fkrxw4xl05l6ns1763bq284e7m2 FOREIGN KEY (tag_id) REFERENCES public.tag(id);


--
-- PostgreSQL database dump complete
--

